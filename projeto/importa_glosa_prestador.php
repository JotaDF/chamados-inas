<?php

$dados = array(
    array('984/2022','R$ 3.680,88','1846142','21645','R$ 2.957,90','5331/2023','2021','R$ 84,10'),
    array('','','','','','7012/2022','2021','R$ 2.275,71'),
    array('5507/2022','R$ 95.437,87','1845105','42974','R$ 252,81','5331/2023','2021','R$ 252,30'),
    array('','','1846267','42981','R$ 282,82','5331/2023','2021','R$ 272,32'),
    array('','','1846552','42987','R$ 2.002,61','5331/2023','2021','R$ 1.550,01'),
    array('','','','','','5341/2023','2022','R$ 159,30'),
    array('','','','','','5341/2023','2022','R$ 292,34'),
    array('','','1848641','39894','R$ 16.737,56','5331/2023','2021','R$ 142,08'),
    array('','','','','','5341/2023','2022','R$ 4.552,38'),
    array('','','','','','5341/2023','2022','R$ 6.415,02'),
    array('','','','','','5341/2023','2022','R$ 4.206,54'),
    array('','','','','','5341/2023','2022','R$ 1.411,40'),
    array('','','1844681','42972','R$ 1.626,82','5331/2023','2021','R$ 1.626,82'),
    array('','','1846065','42984','R$ 31,07','5331/2023','2021','R$ 30,03'),
    array('','','1845667','39924','R$ 46,20','5331/2023','2021','R$ 40,04'),
    array('','','','','','5341/2023','2022','R$ 0,64'),
    array('','','1848035','39790','R$ 1.468,96','5341/2023','2022','R$ 84,10'),
    array('','','','','','5341/2023','2022','R$ 1.303,06'),
    array('','','1847477','39797','R$ 853,14','5341/2023','2022','R$ 748,86'),
    array('','','','','','5341/2023','2022','R$ 20,02'),
    array('','','1846605','39800','R$ 1.614,89','5341/2023','2022','R$ 663,49'),
    array('','','','','','5341/2023','2022','R$ 322,37'),
    array('','','1848137','39808','R$ 12.115,42','5341/2023','2022','R$ 1.208,70'),
    array('','','','','','5341/2023','2022','R$ 1.300,92'),
    array('','','','','','5341/2023','2022','R$ 9.354,76'),
    array('','','','','','5341/2023','2022','R$ 211,94'),
    array('','','1848614','39819','R$ 1.663,28','5341/2023','2022','R$ 125,64'),
    array('','','','','','5341/2023','2022','R$ 38,20'),
    array('','','','','','5341/2023','2022','R$ 401,45'),
    array('','','','','','5341/2023','2022','R$ 730,19'),
    array('','','','','','5341/2023','2022','R$ 73,75'),
    array('','','','','','5341/2023','2022','R$ 294,05'),
    array('','','1848622','39827','R$ 10.437,04','5341/2023','2022','R$ 3.179,52'),
    array('','','','','','5341/2023','2022','R$ 7.257,52'),
    array('','','1848119','39829','R$ 461,46','5341/2023','2022','R$ 104,12'),
    array('','','','','','5341/2023','2022','R$ 357,31'),
    array('','','1848503','39833','R$ 5.615,23','5341/2023','2022','R$ 709,59'),
    array('','','','','','5341/2023','2022','R$ 1.363,48'),
    array('','','','','','5341/2023','2022','R$ 324,72'),
    array('','','','','','5341/2023','2022','R$ 1.504,08'),
    array('','','','','','5341/2023','2022','R$ 1.645,06'),
    array('','','','','','5341/2023','2022','R$ 67,00'),
    array('','','1848500','39835','R$ 1.581,89','5341/2023','2022','R$ 112,09'),
    array('','','','','','5341/2023','2022','R$ 802,43'),
    array('','','','','','5341/2023','2022','R$ 667,37'),
    array('','','1848484','39843','R$ 11.283,02','5341/2023','2022','R$ 5.406,92'),
    array('','','','','','5341/2023','2022','R$ 5.876,08'),
    array('','','1848637','39848','R$ 914,52','5341/2023','2022','R$ 112,09'),
    array('','','','','','5341/2023','2022','R$ 690,34'),
    array('','','','','','5341/2023','2022','R$ 112,09'),
    array('','','1848643','39899','R$ 2.071,10','5341/2023','2022','R$ 279,02'),
    array('','','','','','5341/2023','2022','R$ 51,36'),
    array('','','','','','5341/2023','2022','R$ 74,57'),
    array('','','','','','5341/2023','2022','R$ 764,53'),
    array('','','','','','5341/2023','2022','R$ 215,90'),
    array('','','','','','5341/2023','2022','R$ 583,84'),
    array('','','','','','5341/2023','2022','R$ 67,06'),
    array('','','1848515','39908','R$ 413,61','5341/2023','2022','R$ 74,57'),
    array('','','','','','5341/2023','2022','R$ 62,82'),
    array('','','','','','5341/2023','2022','R$ 276,20'),
    array('','','1848409','39910','R$ 1.246,19','5341/2023','2022','R$ 810,36'),
    array('','','','','','5341/2023','2022','R$ 57,81'),
    array('','','','','','5341/2023','2022','R$ 347,12'),
    array('','','','','','5341/2023','2022','R$ 30,90'),
    array('','','1848021','39919','R$ 6.046,66','5341/2023','2022','R$ 4.309,32'),
    array('','','','','','5341/2023','2022','R$ 1.737,31'),
    array('','','1848734','41051','R$ 1.955,80','5341/2023','2022','R$ 62,88'),
    array('','','','','','5341/2023','2022','R$ 1.888,53'),
    array('','','','','','5341/2023','2022','R$ 4,18'),
    array('','','1848684','41066','R$ 1.533,48','5341/2023','2022','R$ 753,22'),
    array('','','','','','5341/2023','2022','R$ 30,90'),
    array('','','','','','5341/2023','2022','R$ 749,34'),
    array('','','1848675','41078','R$ 3.582,82','5341/2023','2022','R$ 3.582,00'),
    array('','','1848810','42902','R$ 877,43','5341/2023','2022','R$ 142,99'),
    array('','','','','','5341/2023','2022','R$ 249,89'),
    array('','','','','','5341/2023','2022','R$ 484,50'),
    array('','','1847092','42966','R$ 521,57','5341/2023','2022','R$ 520,44'),
    array('','','1846957','42978','R$ 1.044,39','5341/2023','2022','R$ 188,22'),
    array('','','','','','5341/2023','2022','R$ 844,73'),
    array('','','1848388','42979','R$ 1.940,41','5341/2023','2022','R$ 180,30'),
    array('','','','','','5341/2023','2022','R$ 635,66'),
    array('','','','','','5341/2023','2022','R$ 1.089,55'),
    array('','','1848708','42985','R$ 5.006,98','5341/2023','2022','R$ 486,09'),
    array('','','','','','5341/2023','2022','R$ 337,71'),
    array('','','','','','5341/2023','2022','R$ 4.160,31'),
    array('','','1847952','42986','R$ 208,69','5341/2023','2022','R$ 208,24'),
    array('5222/2022','R$ 127.860,54','1847764','31861','R$ 428,12','5341/2023','2022','R$ 84,10'),
    array('','','','','','7012/2022','2022','R$ 168,20'),
    array('','','1847572','32102','R$ 108.000,00','7012/2022','2021','R$ 108.000,00'),
    array('','','1847570','31824','R$ 408,03','7012/2022','2022','R$ 336,40'),
    array('','','1847591','31903','R$ 18.000,00','7012/2022','2021','R$ 18.000,00'),
    array('','','1847234','32021','R$ 457,83','7012/2022','2022','R$ 252,30'),
    array('','','1847577','31870','R$ 440,20','7012/2022','2022','R$ 252,30'),
    array('0515/2023','R$ 4.953,62','1852225','80782','R$ 639,68','5344/2023','2022','R$ 413,75'),
    array('','','1852154','82839','R$ 176,07','5344/2023','2022','R$ 10,01'),
    array('1410/2023','R$ 222,90','12','85523','R$ 222,90','5344/2023','2022','R$ 110,10'),
    array('1441/2023','R$ 6.758,34','11','85519','R$ 1.247,05','5344/2023','2022','R$ 382,74'),
    array('','','','','','5346/2024','2023','R$ 573,11'),
    array('','','44','85561','R$ 55,39','5344/2023','2022','R$ 53,26'),
    array('','','92','85975','R$ 235,14','5344/2023','2022','R$ 40,04'),
    array('','','','','','5346/2024','2023','R$ 152,49'),
    array('','','','','','2077/2024','2022','R$ 10,18'),
    array('','','','','','2076/2024','2023','R$ 29,54'),
    array('','','173','85537','R$ 53,38','5346/2023','2023','R$ 40,04'),
    array('','','','','','5344/2023','2022','R$ 10,01'),
    array('','','233','85507','R$ 4.802,64','5344/2023','2022','R$ 4.131,83'),
    array('','','','','','5346/2023','2023','R$ 649,60'),
    array('','','171','85980','R$ 254,98','5346/2023','2023','R$ 143,04'),
    array('','','308','86129','R$ 109,70','5346/2023','2023','R$ 81,16'),
    array('1859/2023','R$ 6.657,96','435','91082','R$ 10,01','5346/2023','2023','R$ 10,01'),
    array('','','725','91079','R$ 4.131,89','5346/2023','2023','R$ 4.131,83'),
    array('','','434','91086','R$ 93,31','1635/2024','2023','R$ 92,19'),
    array('2219/2023','R$ 8.239,55','916','96278','R$ 647,26','5346/2023','2023','R$ 633,17'),
    array('','','950','96466','R$ 733,52','5346/2023','2023','R$ 710,13'),
    array('','','965','96575','R$ 24,80','5346/2023','2023','R$ 23,23'),
    array('','','1004','96649','R$ 307,85','5346/2023','2023','R$ 291,38'),
    array('','','1125','99301','R$ 181,50','5346/2023','2023','R$ 169,11'),
    array('','','1140','99298','R$ 655,47','5346/2023','2023','R$ 647,47'),
    array('','','1073','99304','R$ 5.346,23','5346/2023','2023','R$ 5.078,91'),
    array('','','1107','99306','R$ 10,34','5346/2023','2023','R$ 10,01'),
    array('','','1157','99309','R$ 332,49','5346/2023','2023','R$ 80,08'),
    array('2837/2023','R$ 54.801,44','1269','101342','R$ 918,96','5346/2023','2023','R$ 794,77'),
    array('','','1327','101721','R$ 354,85','5346/2023','2023','R$ 331,96'),
    array('','','1348','101814','R$ 686,35','5346/2023','2023','R$ 433,14'),
    array('','','1389','102091','R$ 11.179,33','5346/2023','2023','R$ 7.307,64'),
    array('','','1463','102505','R$ 5.070,86','5346/2023','2023','R$ 5.006,65'),
    array('','','1469','102609','R$ 590,38','5346/2023','2023','R$ 486,10'),
    array('','','1487','102798','R$ 4.283,71','5346/2023','2023','R$ 3.978,47'),
    array('','','1591','105711','R$ 146,33','5346/2023','2023','R$ 145,41'),
    array('','','1593','105712','R$ 380,56','5346/2023','2023','R$ 380,56'),
    array('','','1529','105714','R$ 2.489,60','5346/2023','2023','R$ 2.488,45'),
    array('','','1530','105718','R$ 12.066,51','5346/2023','2023','R$ 10.421,65'),
    array('','','1649','107124','R$ 14.874,31','5346/2023','2023','R$ 11.544,25'),
    array('','','1668','107942','R$ 171,01','5346/2023','2023','R$ 161,17'),
    array('','','1684','108318','R$ 1.588,68','5346/2023','2023','R$ 1.588,68'),
    array('3572/2023','R$ 101.286,12','1888','112929','R$ 8.102,34','5346/2023','2023','R$ 8.082,53'),
    array('','','1931','112942','R$ 21.753,54','5346/2023','2023','R$ 20.672,07'),
    array('','','1781','112951','R$ 1.523,91','5346/2023','2023','R$ 1.523,91'),
    array('','','1801','112953','R$ 8.355,01','5346/2023','2023','R$ 1.277,03'),
    array('','','1985','112956','R$ 9.380,56','5346/2023','2023','R$ 9.379,48'),
    array('','','1986','112957','R$ 380,56','5346/2023','2023','R$ 380,56'),
    array('','','2115','112960','R$ 7.953,71','5346/2023','2023','R$ 4.788,19'),
    array('','','1952','112962','R$ 3.638,17','5346/2023','2023','R$ 1.838,77'),
    array('','','1972','112964','R$ 14,32','5346/2023','2023','R$ 10,38'),
    array('','','1988','112973','R$ 17.745,81','5346/2023','2023','R$ 12.802,49'),
    array('','','2084','112981','R$ 8.818,59','5346/2023','2023','R$ 8.780,74'),
    array('','','2014','113000','R$ 580,34','5346/2023','2023','R$ 218,50'),
    array('','','1748','113003','R$ 3.993,62','5346/2023','2023','R$ 3.649,12'),
    array('','','1846','113020','R$ 348,31','5346/2023','2023','R$ 348,31'),
    array('','','1859','113024','R$ 2.236,30','5346/2023','2023','R$ 2.222,39'),
    array('','','2047','113033','R$ 6.151,96','5346/2023','2023','R$ 5.076,48'),
    array('','','2049','113047','R$ 296,06','5346/2023','2023','R$ 112,99'),
    array('3955/2023','R$ 25.518,23','2420','118553','R$ 2.088,43','2076/2024','2023','R$ 2.058,69'),
    array('','','2574','118625','R$ 6.557,46','2076/2024','2023','R$ 6.348,20'),
    array('','','2452','118635','R$ 9.413,35','2076/2024','2023','R$ 9.359,65'),
    array('','','2282','118674','R$ 1.647,76','2076/2024','2023','R$ 1.566,74'),
    array('','','2417','118559','R$ 72,58','0972/2024','2023','R$ 67,96'),
    array('','','2364','118565','R$ 949,82','0972/2024','2023','R$ 933,65'),
    array('','','2329','118629','R$ 4.363,23','0972/2024','2023','R$ 0,00'),
    array('','','2434','118631','R$ 27,38','0972/2024','2023','R$ 23,23'),
    array('','','2561','118641','R$ 264,06','0972/2024','2023','R$ 255,47'),
    array('','','2615','121408','R$ 46,44','0972/2024','2023','R$ 40,04'),
    array('0468/2024','R$ 19.886,81','4950','156604','R$ 247,74','1635/2024','2023','R$ 243,29'),
    array('','','4954','156678','R$ 2.377,69','1635/2024','2023','R$ 2.336,46'),
    array('','','5031','157205','R$ 13.162,41','1635/2024','2023','R$ 13.071,88'),
    array('','','5081','157440','R$ 2.921,48','1635/2024','2023','R$ 210,94'),
    array('','','5155','158081','R$ 1.386,35','1635/2024','2023','R$ 1.364,51'),
    array('','','5159','158103','R$ 239,62','1635/2024','2023','R$ 231,50'),
    array('','','5192','158338','R$ 1.858,65','1635/2024','2023','R$ 1.688,14'),
    array('','','5274','158791','R$ 748,98','1635/2024','2023','R$ 740,09'),
    array('1058/2024','R$ 5.498,76','5356','162173','R$ 3.366,09','1058/2024','2023','R$ 3.340,73'),
    array('','','5362','162226','R$ 1.429,93','1058/2024','2023','R$ 945,65'),
    array('','','5398','162431','R$ 471,12','1058/2024','2023','R$ 235,43'),
    array('1059/2024','R$ 20.292,02','5494','164288','R$ 3.285,75','1635/2024','2023','R$ 3,93'),
    array('1004/2024','R$ 2.539.506,97','826','126830','R$ 63.588,27','1635/2024','2023','R$ 63.197,65'),
    array('','','2991','127661','R$ 69.595,49','1635/2024','2023','R$ 69.090,24'),
    array('','','','','','1636/2024','2022','R$ 182,09'),
    array('','','3005','127666','R$ 255,44','1635/2024','2023','R$ 0,00'),
    array('','','2947','127667','R$ 22.701,37','1635/2024','2023','R$ 0,00'),
    array('','','3023','127670','R$ 106.637,45','1635/2024','2023','R$ 105.220,86'),
    array('','','2891','127671','R$ 54.189,95','1635/2024','2023','R$ 53.925,00'),
    array('','','2884','127672','R$ 21.770,67','1635/2024','2023','R$ 21.770,67'),
    array('','','2882','127675','R$ 301.239,69','1635/2024','2023','R$ 300.272,87'),
    array('','','2881','127679','R$ 236.004,55','1635/2024','2023','R$ 234.764,49'),
    array('','','2946','127683','R$ 5.558,00','1635/2024','2023','R$ 4.960,56'),
    array('','','2805','127684','R$ 2.205,05','1635/2024','2023','R$ 1.143,91'),
    array('','','2828','127686','R$ 91.441,04','1635/2024','2023','R$ 90.867,98'),
    array('','','2825','127689','R$ 49.796,86','1635/2024','2023','R$ 49.617,56'),
    array('','','2756','127691','R$ 72.203,44','1635/2024','2023','R$ 70.409,09'),
    array('','','2860','127697','R$ 381,40','1635/2024','2023','R$ 0,00'),
    array('','','2818','127700','R$ 250.336,17','1635/2024','2023','R$ 248.860,18'),
    array('','','2712','127702','R$ 95,35','1635/2024','2023','R$ 0,00'),
    array('','','2711','127703','R$ 174.602,83','1635/2024','2023','R$ 173.850,47'),
    array('','','2710','127706','R$ 56.603,11','1635/2024','2023','R$ 55.318,95'),
    array('','','2831','127707','R$ 398,58','1635/2024','2023','R$ 398,58'),
    array('','','2775','127709','R$ 11.295,03','1635/2024','2023','R$ 0,00'),
    array('','','2774','127788','R$ 1.870,86','1635/2024','2023','R$ 1.512,26'),
    array('','','2772','127794','R$ 207.579,76','1635/2024','2023','R$ 205.981,21'),
    array('','','2650','127801','R$ 95,35','1635/2024','2023','R$ 0,00'),
    array('','','2649','127807','R$ 572,10','1635/2024','2023','R$ 0,00'),
    array('','','2648','127809','R$ 11.295,03','1635/2024','2023','R$ 0,00'),
    array('','','2647','127814','R$ 11.643,61','1635/2024','2023','R$ 11.464,31'),
    array('','','2651','127830','R$ 675.202,75','1635/2024','2023','R$ 672.603,68'),
    array('','','2653','127843','R$ 95,35','1635/2024','2023','R$ 0,00'),
    array('','','2658','127849','R$ 1.115,67','1635/2024','2023','R$ 1.115,67'),
    array('','','3020','128290','R$ 39.136,75','1635/2024','2023','R$ 0,00'),
    array('5303/2023','R$ 16.153,33','1710','139605','R$ 1.083,84','1635/2024','2023','R$ 926,00'),
    array('','','3894','142210','R$ 255,95','1635/2024','2023','R$ 231,50'),
    array('','','4083','142396','R$ 231,73','1635/2024','2023','R$ 231,50'),
    array('','','3913','142465','R$ 512,80','1635/2024','2023','R$ 463,00'),
    array('','','3842','142479','R$ 5.810,01','1635/2024','2023','R$ 5.520,72'),
    array('','','3805','142495','R$ 514,51','1635/2024','2023','R$ 514,46'),
    array('','','3945','142500','R$ 4.423,29','1635/2024','2023','R$ 4.401,03'),
    array('','','3867','142503','R$ 239,65','1635/2024','2023','R$ 231,50'),
    array('','','3672','142508','R$ 2.129,14','1635/2024','2023','R$ 2.083,50'),
    array('','','3978','142521','R$ 480,67','1635/2024','2023','R$ 463,00'),
    array('','','3766','142523','R$ 463,03','1635/2024','2023','R$ 463,00'),
    array('0306/2024','R$ 9.741,42','3781','142532','R$ 731,81','1635/2024','2023','R$ 694,50'),
    array('','','4337','147021','R$ 240,37','1635/2024','2023','R$ 231,50'),
    array('','','4282','147028','R$ 5.392,33','1635/2024','2023','R$ 5.379,31'),
    array('','','4383','147037','R$ 231,69','1635/2024','2023','R$ 231,50'),
    array('','','4398','147068','R$ 2.375,92','1635/2024','2023','R$ 2.101,98'),
    array('','','4095','147140','R$ 715,05','1635/2024','2023','R$ 694,50'),
    array('5425/2023','R$ 13.678,83','4481','147055','R$ 529,93','1635/2024','2023','R$ 529,87'),
    array('','','4479','147057','R$ 1.052,56','1635/2024','2023','R$ 694,52'),
    array('','','3962','147091','R$ 235,74','1635/2024','2023','R$ 231,50'),
    array('','','4193','147100','R$ 30,22','1635/2024','2023','R$ 22,09'),
    array('','','4103','147114','R$ 1.157,65','1635/2024','2023','R$ 1.157,50'),
    array('','','4204','147155','R$ 5.484,04','1635/2024','2023','R$ 5.431,13'),
    array('','','4455','147158','R$ 621,98','1635/2024','2023','R$ 621,03'),
    array('','','4515','147993','R$ 1.069,88','1635/2024','2023','R$ 231,54'),
    array('','','4814','153037','R$ 2.478,62','1635/2024','2023','R$ 1.638,44'),
    array('','','4839','153121','R$ 414,90','1635/2024','2023','R$ 414,02'),
    array('','','4859','153132','R$ 601,74','1635/2024','2023','R$ 231,52'),
    array('0279/2024','R$ 23.255,68','4641','151718','R$ 10.972,19','1635/2024','2023','R$ 10.913,44'),
    array('','','4545','151719','R$ 826,30','1635/2024','2023','R$ 796,56'),
    array('','','4644','151724','R$ 358,08','1635/2024','2023','R$ 357,98'),
    array('','','4736','152560','R$ 4.223,34','1635/2024','2023','R$ 4.139,48'),
    array('','','4895','154312','R$ 6.875,67','1635/2024','2023','R$ 6.797,28'));

require_once('./actions/ManterCartaRecursada.php');
require_once('./dto/CartaRecursada.php');

require_once('./actions/ManterNotaGlosa.php');
require_once('./dto/NotaGlosa.php');

require_once('./actions/ManterCartaRecurso.php');
require_once('./dto/CartaRecurso.php');

$db_cartaRecursada = new ManterCartaRecursada();
$db_nota_glosa = new ManterNotaGlosa();
$db_carta_recurso = new ManterCartaRecurso();

$ng = new NotaGlosa();
$carta = "";
$valor = "";
$cr = new CartaRecursada();
$ng = new NotaGlosa();
foreach ($dados as $reg) {
    //print_r($reg);
    if($reg[0] != ""){
        $cr = new CartaRecursada();
        $carta = $reg[0];
        $valor = $reg[1];
        $cr->id_fiscal_prestador = 3;
        $cr->carta_recursada = $carta;
        $cr->valor_original = $valor;
        $cr = $db_cartaRecursada->salvar($cr);
        echo "Carta Recursada: " . $cr->id ."<hr/><br/>";
    } 
    if($cr->id > 0){
        if($reg[2] != ""){
            $ng = new NotaGlosa();
            $ng->numero             = $reg[2];
            $ng->lote               = $reg[3];
            $ng->valor              = $reg[4];
            $ng->id_recurso_glosa   = $cr->id;
            $ng->exercicio          = $reg[6];
            $data = new DateTime();
            $data_atual = mktime (0, 0, 0, $data->format("m"), $data->format("d"),  $data->format("Y"));
            $ng->data_emissao       = $data_atual;
            $ng->data_validacao     = $data_atual;

            $ng = $db_nota_glosa->salvar($ng);
            echo "Nota Glosa: " . $ng->id ."<br/>";
        }
        if($ng->id > 0){
            $cre = new CartaRecurso();
            $cre->id_nota_glosa             = $ng->id;
            $cre->carta_informativo         = $reg[5];
            $cre->exercicio                 = $reg[6];
            $cre->valor_deferido            = $reg[7];
            $cre = $db_carta_recurso->salvar($cre);  
            echo "Carta Recurso: " . $cre->id ."<br/>";
        }
    }
}

